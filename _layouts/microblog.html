---
layout: post
tailwind: True
jquery: True 
---

<!-- Microblog Layout: For lesson pages with microblog overlay/side panel -->

<style>
  /* Microblog overlay styles */
  #microblog-overlay {
    position: fixed;
    top: 0;
    right: 0;
    width: 400px;
    max-width: 90vw;
    height: 100vh;
    box-shadow: -2px 0 12px rgba(0,0,0,0.12);
    z-index: 1000;
    transform: translateX(100%);
    transition: transform 0.3s cubic-bezier(.4,0,.2,1);
    display: flex;
    flex-direction: column;
  }
  #microblog-overlay.open {
    transform: translateX(0);
  }
  #microblog-toggle-btn {
    position: fixed;
    top: 4.5rem;
    right: 2.5rem;
    z-index: 1100;
    background: #2563eb;
    color: white;
    border-radius: 999px;
    padding: 1rem 1.5rem;
    font-size: 1.3rem;
    font-weight: 600;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    border: none;
    cursor: pointer;
    transition: background 0.2s;
    opacity: 0.97;
    touch-action: manipulation;
  }
  #microblog-toggle-btn:hover {
    background: #1e40af;
    opacity: 1;
  }
  #microblog-overlay .close-btn {
    align-self: flex-end;
    margin: 1rem 1rem 0 0;
    font-size: 1.5rem;
    color: #555;
    background: none;
    border: none;
    cursor: pointer;
  }
  @media (max-width: 600px) {
    #microblog-overlay {
      width: 100vw;
      max-width: 100vw;
    }
    #microblog-toggle-btn {
      right: 0.5rem;
      top: 3.5rem;
      padding: 1.2rem 2.2rem;
      font-size: 1.5rem;
      min-width: 56px;
      min-height: 56px;
      border-radius: 50%;
      box-shadow: 0 2px 12px rgba(0,0,0,0.18);
    }
  }
</style>

<!-- Main lesson content -->
<main id="lesson-content">
  {{ content }}
  <!-- Microblog toggle button (floating, mobile-friendly) -->
  <button id="microblog-toggle-btn" aria-label="Open Microblog">ðŸ’¬ Microblog</button>
  <!-- Microblog panel (hidden by default) -->
  <aside id="microblog-panel" class="fixed top-0 right-0 h-full sm:w-[400px] max-w-full shadow-2xl z-50 transform translate-x-full transition-transform duration-300 flex flex-col" tabindex="-1" aria-label="Microblog panel">
    <button class="close-btn self-end m-4 text-2xl text-gray-500 hover:text-gray-700 bg-none border-none" aria-label="Close Microblog">&times;</button>
    <div class="microblog-content flex-1 overflow-y-auto px-4 pb-4">
      {% if page.microblog_heading %}
        <h2 class="text-xl font-bold mb-4">{{ page.microblog_heading }}</h2>
      {% endif %}
      {% if page.microblog_content %}
        {{ page.microblog_content }}
      {% else %}
        <!-- Slot for microblog code: include microblog-playground or other content -->
        {% include microblog_foundation.html %}
      {% endif %}
    </div>
  </aside>
</main>

<script>
const overlay = document.getElementById('microblog-panel');
const toggleBtn = document.getElementById('microblog-toggle-btn');
const closeBtn = overlay.querySelector('.close-btn');

function openMicroblog() {
  overlay.classList.add('open');
  overlay.style.transform = 'translateX(0)';
  overlay.focus();
  // Add a transparent backdrop for mobile tap-to-close
  if (!document.getElementById('microblog-backdrop')) {
    const backdrop = document.createElement('div');
    backdrop.id = 'microblog-backdrop';
    backdrop.style.position = 'fixed';
    backdrop.style.top = '0';
    backdrop.style.left = '0';
    backdrop.style.width = '100vw';
    backdrop.style.height = '100vh';
    backdrop.style.zIndex = '1049';
    backdrop.style.background = 'rgba(0,0,0,0.01)';
    backdrop.onclick = closeMicroblog;
    document.body.appendChild(backdrop);
  }
}
function closeMicroblog() {
  overlay.classList.remove('open');
  overlay.style.transform = 'translateX(100%)';
  toggleBtn.focus();
  // Remove backdrop if present
  const backdrop = document.getElementById('microblog-backdrop');
  if (backdrop) backdrop.remove();
}
toggleBtn.onclick = openMicroblog;
closeBtn.onclick = closeMicroblog;
overlay.addEventListener('keydown', e => {
  if (e.key === 'Escape') closeMicroblog();
});
</script>
