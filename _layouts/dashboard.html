---
title: Dashboard
layout: aesthetihawk
active_tab: Dashboard
---

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/apexcharts/dist/apexcharts.css" />
<link rel="stylesheet" href="https://preline.co/assets/css/main.min.css" />
<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/Aesthetihawk/tabs.css" />
<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/Aesthetihawk/charts.css" />
<div class="w-full">
    <div class="space-y-4 sm:space-y-6">
        <div class="text-sm font-medium text-center border-b text-neutral-400 border-neutral-700 relative">
            <ul class="flex flex-wrap -mb-px relative" id="tab-bar">
                <li class="me-2">
                    <a href="#" id="tab-github"
                        class="tab-btn inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:border-neutral-300 hover:text-neutral-300 active text-blue-500 border-blue-500"
                        aria-current="page">GitHub Analytics</a>
                </li>
                <li class="me-2">
                    <a href="#" id="tab-bathroom"
                        class="tab-btn inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:border-neutral-300 hover:text-neutral-300">Bathroom
                        Analytics</a>
                </li>
            </ul>
            <!-- sliding underline indicator -->
            <div id="tab-underline"
                style="position:absolute;bottom:0;left:0;height:2px;width:0;background:#2563eb;transition:all 0.3s cubic-bezier(.4,0,.2,1);border-radius:2px;">
            </div>
        </div>

        <!-- tab content container -->
        <div id="tab-content-container" class="relative min-h-[400px]">
            <!-- github analytics tab content -->
            <div id="tab-content-github" class="tab-content block">
                <!-- Grid -->
                <div
                    class="grid sm:grid-cols-2 lg:grid-cols-4 sm:grid-rows-4 lg:grid-rows-2  gap-4 sm:gap-6 text-neutral-200">
                    <!-- Avatar Card -->
                    <div
                        class="row-span-2 col-start-1 flex flex-col border shadow-2xs rounded-xl bg-neutral-800 border-neutral-700">
                        <div class="p-4 md:p-5 flex justify-center items-center">
                            <img src="" alt="User Avatar" id="avatar" class="w-32 h-32 rounded-xl object-cover" />
                        </div>
                    </div>

                    <!-- Profile Info Card -->
                    <div
                        class="row-span-2 col-start-2 flex flex-col border shadow-2xs rounded-xl bg-neutral-800 border-neutral-700 p-5">
                        <p class="text-xs uppercase text-neutral-500 mb-2">GitHub Info</p>
                        <h3 id="username" class="text-2xl font-medium mb-2">Loading...</h3>
                        <p id="profile-url" class="text-sm mb-1">Profile URL: Loading...</p>
                        <p id="repos-url" class="text-sm mb-1">Repos URL: Loading...</p>
                        <p id="public-repos" class="text-sm mb-1">Public Repos: Loading...</p>
                        <p id="public-gists" class="text-sm mb-1">Public Gists: Loading...</p>
                        <p id="followers" class="text-sm mb-1">Followers: Loading...</p>
                        <p id="following" class="text-sm mb-1">Following: Loading...</p>
                        <p id="line-change" class="text-sm mt-2">Loading line changes...</p>
                    </div>

                    <!-- Commits Card -->
                    <div
                        class="col-start-3 flex flex-col border shadow-2xs rounded-xl bg-neutral-800 border-neutral-700 p-5">
                        <p class="text-xs uppercase text-neutral-500 mb-2 flex items-center gap-1">
                            Commits
                            <a href="#" class="info-link" id="commits-info" title="Click for details">
                                <i class="fas fa-info-circle info-icon"></i>
                            </a>
                        </p>
                        <h3 id="commits-count" class="text-2xl font-medium">Loading...</h3>
                    </div>

                    <!-- Issues Card -->
                    <div
                        class="col-start-4 flex flex-col border shadow-2xs rounded-xl bg-neutral-800 border-neutral-700 p-5">
                        <p class="text-xs uppercase text-neutral-500 mb-2 flex items-center gap-1">
                            Issues
                            <a href="#" class="info-link" id="issues-info" title="Click for details">
                                <i class="fas fa-info-circle info-icon"></i>
                            </a>
                        </p>
                        <h3 id="issues-count" class="text-2xl font-medium">Loading...</h3>
                    </div>

                    <!-- Pull Requests Card -->
                    <div
                        class="col-start-3 row-start-2 flex flex-col border shadow-2xs rounded-xl bg-neutral-800 border-neutral-700 p-5">
                        <p class="text-xs uppercase text-neutral-500 mb-2 flex items-center gap-1">
                            Pull Requests
                            <a href="#" class="info-link" id="prs-info" title="Click for details">
                                <i class="fas fa-info-circle info-icon"></i>
                            </a>
                        </p>
                        <h3 id="prs-count" class="text-2xl font-medium">Loading...</h3>
                    </div>

                    <!-- Public Repos Card -->
                    <div
                        class="col-start-4 row-start-2 flex flex-col border shadow-2xs rounded-xl bg-neutral-800 border-neutral-700 p-5">
                        <p class="text-xs uppercase text-neutral-500 mb-2">Public Repos</p>
                        <h3 id="public-repos" class="text-2xl font-medium">Loading...</h3>
                    </div>
                </div>

                <!-- Commit Cards Container -->
                <div id="commitCardsContainer" class="mt-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>

                <!-- Grade Prediction Buttons -->
                <div class="mt-6 flex gap-4">
                    <button id="predictGradeBtn"
                        class="px-4 py-2 rounded bg-blue-600 hover:bg-blue-700 transition text-white font-semibold">Predict
                        Grade (Commits)</button>
                    <button id="smartPredictBtn"
                        class="px-4 py-2 rounded bg-green-600 hover:bg-green-700 transition text-white font-semibold">Smart
                        Predict Grade</button>
                </div>
                <p id="userGrade" class="mt-4 text-xl font-semibold text-neutral-300"></p>

            </div>

            <!-- bathroom analytics tab content -->
            <div id="tab-content-bathroom" class="tab-content hidden">
                <div class="items-center justify-center text-neutral-300 p-8 text-center">
                    <p>Legally correct, morally questionable: it's bathroom analytics!</p>
                    <br />
                    <p>Wow, it's so empty here. Maybe something will come up soon...?</p>
                </div>
            </div>
        </div>
    </div>
</div>

    <!-- Modal for info details -->
    <div id="dataModal" class="hidden" aria-hidden="true" role="dialog" aria-modal="true">
        <div class="modal-content">
            <span class="close" title="Close modal">&times;</span>
            <pre id="modalData"></pre>
        </div>
    </div>

    <!-- FontAwesome for icons -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

<!-- Required plugins -->
<script src="https://cdn.jsdelivr.net/npm/preline/dist/index.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lodash/lodash.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts/dist/apexcharts.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/preline/dist/helper-apexcharts.js"></script>

<!-- Your GitHub analytics JS integrated -->
<script type="module">
    import { pythonURI, fetchOptions } from '{{ site.baseurl }}/assets/js/api/config.js';

    const profileLinksUrl = `${pythonURI}/api/analytics/github/user/profile_links`;
    const userProfileUrl = `${pythonURI}/api/analytics/github/user`;
    const commitsUrl = `${pythonURI}/api/analytics/github/user/commits`;
    const prsUrl = `${pythonURI}/api/analytics/github/user/prs`;
    const issuesUrl = `${pythonURI}/api/analytics/github/user/issues`;

    async function fetchData() {
        try {
            const [profileLinksRes, userProfileRes, commitsRes, prsRes, issuesRes] = await Promise.all([
                fetch(profileLinksUrl, fetchOptions),
                fetch(userProfileUrl, fetchOptions),
                fetch(commitsUrl, fetchOptions),
                fetch(prsUrl, fetchOptions),
                fetch(issuesUrl, fetchOptions),
            ]);

            if (![profileLinksRes, userProfileRes, commitsRes, prsRes, issuesRes].every((res) => res.ok)) {
                throw new Error("One or more fetch requests failed.");
            }

            const profileLinks = await profileLinksRes.json();
            const userProfile = await userProfileRes.json();
            const commitsData = await commitsRes.json();
            const prsData = await prsRes.json();
            const issuesData = await issuesRes.json();

            const commitsArray = commitsData.details_of_commits || [];
            const commitsCount = commitsData.total_commit_contributions || 0;
            const totalAdditions = commitsData.total_lines_added || 0;
            const totalDeletions = commitsData.total_lines_deleted || 0;

            const prsArray = prsData.pull_requests || [];
            const issuesArray = issuesData.issues || [];

            const username = userProfile.login || "N/A";
            const avatarUrl = userProfile.avatar_url || "";
            const profileUrl = profileLinks.profile_url || "#";
            const reposUrl = profileLinks.repos_url || "#";

            // Fill in profile info
            document.getElementById("avatar").src = avatarUrl;
            document.getElementById("username").textContent = `Username: ${username}`;
            document.getElementById("profile-url").innerHTML = `Profile URL: <a href="${profileUrl}" target="_blank" class="text-blue-400 hover:underline">${profileUrl}</a>`;
            document.getElementById("repos-url").innerHTML = `Repos URL: <a href="${reposUrl}" target="_blank" class="text-blue-400 hover:underline">${reposUrl}</a>`;
            document.getElementById("public-repos").textContent = `Public Repos: ${userProfile.public_repos || 0}`;
            document.getElementById("public-gists").textContent = `Public Gists: ${userProfile.public_gists || 0}`;
            document.getElementById("followers").textContent = `Followers: ${userProfile.followers || 0}`;
            document.getElementById("following").textContent = `Following: ${userProfile.following || 0}`;
            document.getElementById("line-change").textContent = `Lines Changed: +${totalAdditions} / -${totalDeletions}`;

            document.getElementById("commits-count").textContent = commitsCount;
            document.getElementById("issues-count").textContent = issuesArray.length;
            document.getElementById("prs-count").textContent = prsArray.length;

            // Clear commit cards container
            const commitCardsContainer = document.getElementById("commitCardsContainer");
            commitCardsContainer.innerHTML = "";

            commitsArray.forEach((commit) => {
                const card = document.createElement("div");
                card.className =
                    "flex flex-col border shadow-2xs rounded-xl bg-neutral-800 border-neutral-700 p-4";

                card.innerHTML = `
                    <h4 class="text-sm font-medium mb-1">${commit.repository || "Unknown Repo"}</h4>
                    <p class="text-xs mb-1">
                        <strong>Message:</strong>
                        <a href="${commit.url}" target="_blank" class="text-blue-400 hover:underline">
                            ${commit.message || "No message"}
                        </a>
                    </p>
                    <p class="text-xs mb-1"><strong>Date:</strong> ${new Date(commit.date).toLocaleString() || "Unknown"}</p>
                    <p class="text-xs mb-1">
                        <span class="text-green-400">+${commit.additions || 0}</span>
                        /
                        <span class="text-red-400">-${commit.deletions || 0}</span>
                    </p>

                `;
                commitCardsContainer.appendChild(card);
            });

            // Grade prediction logic
            const predictGradeBtn = document.getElementById("predictGradeBtn");
            const smartPredictBtn = document.getElementById("smartPredictBtn");
            const userGradeEl = document.getElementById("userGrade");

            predictGradeBtn.onclick = () => {
                const grade = predictGrade(commitsCount);
                userGradeEl.textContent = `Grade based on commits: ${grade}`;
            };

            smartPredictBtn.onclick = () => {
                const grade = smartPredictGrade(commitsCount, prsArray.length, issuesArray.length);
                userGradeEl.textContent = `Smart Grade: ${grade}`;
            };

            // Info links to show modal details
            setupInfoModal("commits-info", commitsData);
            setupInfoModal("issues-info", issuesData);
            setupInfoModal("prs-info", prsData);

        } catch (error) {
            console.error("Error fetching GitHub data:", error);
            alert("Error loading GitHub analytics data. Please check console for details.");
        }
    }

    function predictGrade(commits) {
        if (commits >= 1000) return "A+";
        if (commits >= 800) return "A";
        if (commits >= 600) return "A-";
        if (commits >= 400) return "B+";
        if (commits >= 200) return "B";
        if (commits >= 100) return "B-";
        if (commits >= 50) return "C";
        return "F";
    }

    function smartPredictGrade(commits, prs, issues) {
        const score = commits * 0.6 + prs * 0.3 + issues * 0.1;
        if (score >= 1000) return "A+";
        if (score >= 800) return "A";
        if (score >= 600) return "A-";
        if (score >= 400) return "B+";
        if (score >= 200) return "B";
        if (score >= 100) return "B-";
        if (score >= 50) return "C";
        return "F";
    }

    // Setup modal functionality for info links
    function setupInfoModal(elementId, data) {
        const link = document.getElementById(elementId);
        const modal = document.getElementById("dataModal");
        const modalData = document.getElementById("modalData");
        const closeBtn = modal.querySelector(".close");

        link.addEventListener("click", (e) => {
            e.preventDefault();
            modalData.textContent = JSON.stringify(data, null, 2);
            modal.classList.remove("hidden");
            modal.setAttribute("aria-hidden", "false");
        });

        closeBtn.onclick = () => {
            modal.classList.add("hidden");
            modal.setAttribute("aria-hidden", "true");
        };

        window.onclick = (event) => {
            if (event.target === modal) {
                modal.classList.add("hidden");
                modal.setAttribute("aria-hidden", "true");
            }
        };
    }

    // Tab switching logic
    const tabs = document.querySelectorAll(".tab-btn");
    const tabContents = document.querySelectorAll(".tab-content");
    const tabUnderline = document.getElementById("tab-underline");

    function updateUnderline(el) {
        const rect = el.getBoundingClientRect();
        const containerRect = el.parentElement.parentElement.getBoundingClientRect();
        tabUnderline.style.left = `${rect.left - containerRect.left}px`;
        tabUnderline.style.width = `${rect.width}px`;
    }

    tabs.forEach((tab) => {
        tab.addEventListener("click", (e) => {
            e.preventDefault();
            tabs.forEach(t => t.classList.remove("active", "text-blue-500", "border-blue-500"));
            tabContents.forEach(c => c.classList.add("hidden"));
            tabContents.forEach(c => c.classList.remove("block"));

            tab.classList.add("active", "text-blue-500", "border-blue-500");
            const tabId = tab.id.replace("tab-", "tab-content-");
            document.getElementById(tabId).classList.remove("hidden");
            document.getElementById(tabId).classList.add("block");

            updateUnderline(tab);
        });
    });

    // On page load, set underline to the active tab
    window.onload = () => {
        const activeTab = document.querySelector(".tab-btn.active") || tabs[0];
        updateUnderline(activeTab);
        fetchData();
    };
</script>